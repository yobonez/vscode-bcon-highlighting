{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Language for Konfiguration Object Notation",
	"patterns": [
		{
			"include": "#comments"
		},
		{
			"include": "#multiline_comment"
		},
		{
			"include": "#class-definition"
		},
		{
			"include": "#var_expr_str_double_quote"
		},
		{
			"include": "#braces"
		},
		{
			"include": "#var-expr"
		},
		{
			"include": "#keywords"
		},
		{
			"include": "#importuseas_str_double_quote"
		},
		{
			"include": "#punctuation"
		},
		{
			"include": "#regexp"
		}
	],
	"repository": {
		"multiline_comment": {
			"contentName": "comment.block.bcon",
			"begin": "(?<=^|[\\s;,:\\[\\]])(')",
			"beginCaptures": {
				"1": {"name": "comment.block.bcon"}
			},
			"end": "'",
			"endCaptures": {
				"0": {"name": "comment.block.bcon"}
			}
		},

		"var_expr_str_double_quote": {
			"contentName": "meta.var.expr.bcon",
			"begin": "(?<==>.*)\"",
			"beginCaptures": {
				"0": {"name": "punctuation.definition.string.begin.bcon"}
			},
			"end": "\"",
			"endCaptures": {
				"0": {"name": "punctuation.definition.string.end.bcon"}
			},
			"name": "string.quoted.double.bcon",
			"patterns": [
				{
					"name": "meta.template.expression.bcon",
					"begin": "\\[",
					"beginCaptures": {
						"0": {
							"name": "punctuation.definition.template-expression.begin.bcon"
						}
					},
					"patterns": [
						{
							"name":"meta.template.expression.bcon",
							"match":"(\\b(Main)\\b(\\.)|\\b(This)\\b(\\.)|([_a-zA-Z][_a-zA-Z0-9]*)(\\.))|([_a-zA-Z0-9]*)(\\.)*",
							"captures":{
								"2": {"name": "variable.language.main.bcon"},
								"3": {"name": "punctuation.accessor.dot.bcon"},
								"4": {"name": "variable.language.this.bcon"},
								"5": {"name": "punctuation.accessor.dot.bcon"},
								"6": {"name": "variable.other.object.bcon"},
								"7": {"name": "punctuation.accessor.dot.bcon"},
								"8": {"name": "variable.other.property.bcon"},
								"9": {"name": "punctuation.accessor.dot.bcon"}
							}
						}
					],
					"end": "\\]",
					"endCaptures": {
						"0": {
							"name": "punctuation.definition.template-expression.end.bcon"
						}
					},
					"contentName": "meta.embedded.line.bcon"
				},
				{
					"name": "constant.character.escape.bcon",
					"match": "(?=.*\"date)([-:.])|(\\\\u[0-9A-Fa-f]{4})|(\\\\.)|(\\\\\")"
				}
			]
		},

		"comments": {
			"patterns": [{
				"name":"comment.line.bcon",
				"match": "#[^\n\r]*"
			}]
		},
		"braces": {
            "patterns": [{
                "name":"meta.brace.square.bcon",
                "match":"(\\[|\\])"
            }]
        },
		"class-definition": {
			"begin": "\\b(class)\\s+([A-Z][a-zA-Z0-9_]*)\\s*(extends)?\\s*([A-Z][a-zA-Z0-9_]*)?\\s*\\[",
			"beginCaptures": {
				"1": {"name": "keyword.control.class.bcon"},
				"2": {"name": "entity.name.type.class.bcon"},
				"3": {"name": "keyword.control.class.bcon"},
				"4": {"name": "entity.name.type.class.bcon"}
			},
			"end": "\\](?=\\s*;)",
			"patterns": [
				{
					"include": "#comments"
				},
				{
					"include": "#multiline_comment"
				},
				{
					"include": "#class-field-type-object"
				},
				{
					"name": "meta.class.field.bcon",
					"match": "(@)([a-zA-Z_][a-zA-Z0-9_]*)(\\?)?(\\s*)(:)(\\s*)([A-Z][a-zA-Z0-9_]*|String|Number|Boolean|BigInt|Date|RegExp|Array|Object|Any)?(\\s*=)?",
					"captures": {
						"1": {"name": "storage.type.bcon"},
						"2": {"name": "variable.parameter.bcon"},
						"3": {"name": "keyword.operator.optional.bcon"},
						"4": {"name": "punctuation.separator.type.bcon"},
						"5": {"name": "punctuation.separator.type.bcon"},
						"6": {"name": "punctuation.separator.type.bcon"},
						"7": {"name": "entity.name.type.bcon"},
						"8": {"name": "keyword.operator.assignment.default.bcon"}
					}
				},
				{
					"include": "#class-field-values"
				},
				{
					"name": "punctuation.terminator.statement.bcon",
					"match": ";"
				}
			]
		},
		"class-field-type-object": {
			"begin": ":\\s*\\[",
			"end": "\\]",
			"patterns": [
				{
					"include": "#comments"
				},
				{
					"name": "meta.class.field.nested.bcon",
					"match": "(@)([a-zA-Z_][a-zA-Z0-9_]*)(\\s*:\\s*)([A-Z][a-zA-Z0-9_]*|String|Number|Boolean|BigInt|Date|RegExp|Array|Object|Any)?",
					"captures": {
						"1": {"name": "storage.type.bcon"},
						"2": {"name": "variable.parameter.bcon"},
						"3": {"name": "punctuation.separator.type.bcon"},
						"4": {"name": "entity.name.type.bcon"}
					}
				},
				{
					"name": "punctuation.terminator.statement.bcon",
					"match": ";"
				}
			]
		},
		"class-field-values": {
			"patterns": [
				{
					"name": "constant.language.bcon",
					"match": "\\b(True|False|Null|Undefined|NaN|Infinity)\\b"
				},
				{
					"name": "constant.numeric.decimal.bcon",
					"match": "\\b\\d+(\\.\\d+)?(e[+-]?\\d+)?(n)?\\b"
				},
				{
					"name": "constant.numeric.hexadecimal.bcon",
					"match": "\\b0x[A-Fa-f0-9]+\\b"
				},
				{
					"name": "string.quoted.double.bcon",
					"begin": "\"",
					"end": "\"",
					"patterns": [
						{
							"name": "constant.character.escape.bcon",
							"match": "\\\\."
						}
					]
				},
				{
					"name": "keyword.other.encoding.bcon",
					"match": "\\.(date|ascii|base64|base64url|hex|ucs2|ucs-2|utf16le|utf-16le|utf8|utf-8|bin|binary|latin1)\\b"
				},
				{
					"name": "entity.name.type.bcon",
					"match": "\\b(String|Number|Boolean|BigInt|Date|RegExp|Array|Object|Any)\\b"
				}
			]
		},
		"var-expr": {
			"patterns": [
				{
					"name":"meta.var.expr.bcon",
					"match": "(@\\*|@)(\\b([a-zA-Z_][a-zA-Z0-9_]+)\\b)?",
					"captures": {
						"1": {"name": "storage.type.bcon"},
						"2": {"name": "variable.name.bcon"}
					}
				},
				{
					"name":"meta.var.expr.bcon",
					"match":"(=>)",
					"captures": {
						"1":{"name": "keyword.operator.assignment.bcon"}
					}
				},
				{
					"name":"meta.var.expr.bcon",
					"match":"(?<=>)\\s*\\b([a-zA-Z_][a-zA-Z0-9_]*)(\\.)([a-zA-Z0-9_]+)((\\.)[a-zA-Z0-9_]*)*(?=\\s*(;|#|\\]|$))",
					"captures":{
						"1": {"name": "variable.other.object.bcon"},
						"2": {"name": "punctuation.accessor.bcon"},
						"3": {"name": "variable.other.property.bcon"},
						"5": {"name": "punctuation.accessor.bcon"}
					}
				},
				{
					"name":"meta.var.expr.bcon",
					"match":"(?<=>)\\s*\\b(Main|This)\\b",
					"captures":{
						"1": {"name": "variable.language.bcon"}
					}
				},
				{
					"name":"meta.var.expr.bcon",
					"match":"(?<=>)\\s*(?<!\\.)\\b([a-zA-Z_][a-zA-Z0-9_]*)\\b(?![.\\[])(?=\\s*(;|#|\\]|$))",
					"captures":{
						"1": {"name": "variable.other.readwrite.bcon"}
					}
				},
				{
					"name":"meta.var.expr.bcon",
					"match":"(?<=>)\\s*\\b(Infinity|Undefined|Null|NaN|True|False)\\b",
					"captures":{
						"1":{"name":"constant.language.bcon"}	
					}
				},
				{
					"name":"meta.var.expr.bcon",
					"match": "(?<=>)\\s*(-)?(0x[A-Fa-f0-9]+)|(0b[0-1]+)|(0o[0-7]+)",
					"captures": {
						"1": {"name":"keyword.operator.arithmetic"},
						"2": {"name": "constant.numeric.hexadecimal.bcon"},
						"3": {"name": "constant.numeric.binary.bcon"},
						"4": {"name": "constant.numeric.octagonal.bcon"}
					}
				},
				{
					"name":"meta.var.expr.bcon",
					"match": "(?<=>)\\s*(-)?(\\.)?\\b((\\d*_)*\\d+(\\.\\d+)?(e[\\+\\-]?\\d+)?)(n)?\\b",
					"captures": {
						"1": {"name":"keyword.operator.arithmetic"},
						"2": {"name":"constant.numeric.decimal.bcon"},
						"3": {"name":"constant.numeric.decimal.bcon"},
						"7": {"name":"constant.numeric.decimal.bcon"}
					}
				},
				{
					"name":"meta.var.expr.bcon",
					"match": "(?<=>)\\s*(?<=\")(\\.)(date|ascii|base64|base64url|hex|ucs2|ucs-2|utf16le|utf-16le|utf8|utf-8|bin|binary|latin1)",
					"captures": {
						"1": {"name": "keyword.other.encoding.bcon"},
						"2": {"name": "keyword.other.encoding.bcon"}
					}
				},
				{
					"name":"meta.var.expr.bcon",
					"match": "(?<=>)\\s*(/)((?:[^\\/]|\\\\.)*)(/)([dgimsuvy]*)",
					"captures": {
						"1":{"name":"string.regexp.bcon", "patterns": [{"name":"punctuation.definition.string.begin.bcon", "match":"/"}]},
						"2":{"name": "string.regexp.bcon"},
						"3":{"name":"string.regexp.bcon", "patterns": [{"name":"punctuation.definition.string.end.bcon", "match":"/"}]},
						"4":{"name": "keyword.other.bcon"}
					}
				}
			]
		},
		"importuseas_str_double_quote": {
			"contentName": "meta.importuseas.bcon",
			"begin": "(?<=use.*|as.*|import.*)\"",
			"beginCaptures": {
				"0": {"name": "punctuation.definition.string.begin.bcon"}
			},
			"end": "\"",
			"endCaptures": {
				"0": {"name": "punctuation.definition.string.end.bcon"}
			},
			"name": "string.quoted.double.bcon",
			"patterns": [
				{
					"name": "constant.character.escape.bcon",
					"match": "(?=.*\"\\.date)([-:.])|(\\\\u[0-9A-Fa-f]{4})|(\\\\.)|(\\\\\")"
				}
			]
		},
		"keywords": {
			"patterns": [
				{
					"name":"keyword.control.export.bcon",
					"match":"\\b(export)\\b"
				},
				{
					"name":"keyword.control.class.bcon",
					"match":"\\b(class|extends|includes)\\b"
				},
				{
					"name":"meta.importuseas.bcon",
					"match":"\\b(import|use|as|from|skip)\\b",
					"captures": {
						"1":{"name":"keyword.control.bcon"}
					}
				},
				{
					"name":"meta.importuseas.bcon",
					"match":"(?<=(import|use|as) *)\\b(Infinity|Undefined|Null|NaN|True|False)\\b",
					"captures":{
						"2":{"name":"constant.language.bcon"}	
					}
				},
				{
					"name":"meta.importuseas.bcon",
					"match": "(?<=use *|as *) (-)?(0x[A-Fa-f0-9]*)|(0b[0-1]*)|(0o[0-7]*)",
					"captures": {
						"1": {"name":"keyword.operator.arithmetic"},
						"2": {"name": "constant.numeric.hexadecimal.bcon"},
						"3": {"name": "constant.numeric.binary.bcon"},
						"4": {"name": "constant.numeric.octagonal.bcon"}
					}
				},
				{
					"name":"meta.importuseas.bcon",
					"match":"(?<=use *|as *) (-)?(\\.)?\\b((\\d*_)*\\d*(\\.\\d*)?(e[\\+\\-]\\d*)?)(n)?\\b",
					"captures": {
						"1": {"name":"keyword.operator.arithmetic"},
						"2": {"name":"constant.numeric.decimal.bcon"},
						"3": {"name":"constant.numeric.decimal.bcon"},
						"7": {"name":"constant.numeric.decimal.bcon"}
					}
				},
				{
					"name":"meta.importuseas.bcon",
					"match":"(?<=(use|import).*\".*\")(\\.)(date|ascii|base64|base64url|hex|ucs2|ucs-2|utf16le|utf-16le|utf8|utf-8|bin|binary|latin1)",
					"captures": {
						"2": {"name": "keyword.other.encoding.bcon"},
						"3": {"name": "keyword.other.encoding.bcon"}
					}
				},
				{
					"name":"meta.importuseas.bcon",
					"match": "(?<=(import|use|as) )(/)(.*)(/)([dgimsuvy]*)",
					"captures": {
						"2":{"name":"string.regexp.bcon", "patterns": [{"name":"punctuation.definition.string.begin.bcon", "match":"/"}]},
						"3":{"name": "string.regexp.bcon"},
						"4":{"name":"string.regexp.bcon", "patterns": [{"name":"punctuation.definition.string.end.bcon", "match":"/"}]},
						"5":{"name": "keyword.other.bcon"}
					}
				},
				{
					"name":"meta.importuseas.bcon",
					"match":"(?<=use *|as *|from *)\\b([a-zA-Z_][a-zA-Z0-9_]*)\\b",
					"captures": {
						"1": {"name": "variable.other.readwrite.bcon"}
					}
				},
				{
					"name":"meta.importuseas.bcon",
					"match": "\\b(from)\\b",
					"captures": {
						"1": {"name": "keyword.control.bcon"}
					}
				}
			]
		},

		"punctuation": {
			"patterns": [
				{
					"name": "punctuation.terminator.statement.bcon",
					"match": ";"
				}
			]
		}
	},
	"scopeName": "source.bcon"
}